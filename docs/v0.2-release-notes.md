# Release 0.2.0 - Docker Support

This release adds Docker storage detection and cleanup. If you're running Docker, you probably have 10-50+ GB sitting around that you didn't know about.

## What's New

### Docker Detection

Heft now queries the Docker daemon to find images, containers, volumes, and build cache. It uses `docker system df` under the hood, so you'll see both total size and what's actually reclaimable.

The detector handles the common edge cases gracefully:
- If docker isn't installed, it just skips detection
- If the daemon isn't running, you get a clear message
- Permission issues are caught and reported

### Docker Cleanup

You can now clean up Docker resources with the `clean` command. It uses docker's prune commands:
- `docker image prune -a -f` for images
- `docker container prune -f` for containers
- `docker volume prune -f` for volumes
- `docker builder prune -a -f` for build cache

Use `--category container-data` to only clean Docker stuff.

### Docker Desktop VM Detection (Experimental)

This one's a bit different. Docker Desktop on macOS and Windows stores everything in a VM disk file that can balloon to 30-60 GB. The file doesn't shrink automatically when you delete things, so you can have a tiny amount of actual Docker data but a huge disk file.

We've implemented detection for these VM files:
- macOS: `~/Library/Containers/com.docker.docker/Data/vms/0/data/Docker.raw`
- Windows: `%USERPROFILE%\AppData\Local\Docker\wsl\data\ext4.vhdx`

**Here's the catch:** We don't have macOS or Windows machines to test this on. The paths are from Docker's docs, but we need people to verify it actually works. If you're on macOS or Windows, please test this and let us know in issue #42.

## What's Tested

Everything on Linux has been tested and works:
- Docker detection works correctly
- Cleanup works (both dry-run and actual execution)
- Error handling for daemon not running, permissions, etc.
- JSON output format

The macOS and Windows VM detection needs community testing. It should work based on the documentation, but real-world verification would be great.

## Breaking Changes

None. If you were using 0.1.x, everything still works the same way.

## Known Issues

1. Docker Desktop VM files report 0 for reclaimable space. We can't tell how much is reclaimable without digging into the VM internals, so we just report the total size. The cleanup hints will help you reclaim space though.

2. Bytes freed in cleanup is estimated from scan time. If Docker's state changes between scan and cleanup, the numbers might not match exactly.

3. Cleanup hints show interactive commands (`docker image prune -a`) but the actual cleanup uses the non-interactive version with `-f`. This is intentional - hints are for manual use, cleanup automates it.

## Upgrade

Just pull the latest version. Docker detection runs automatically if you have docker installed. If you want to skip it for some reason, use `--skip-docker`.

## What's Next

After we get feedback on the Docker Desktop VM detection and know it works:
- Snapshot storage - save scan results to a database
- Diff engine - compare scans over time to see what's growing
- More platform-specific detectors

If you're on macOS or Windows with Docker Desktop, testing the VM detection would really help. Check issue #42 for instructions.

## Thanks
 Special shoutout to anyone who helps test the macOS/Windows stuff.
